
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Storage</title>
</head>
<body>
    <div>
        <!-- Specify user's name here -->
        <h1 id="user-server"></h1>

        <form action="/storage" method="POST" enctype="multipart/form-data" accept-charset="UTF-8">
            <input type="file" name="submitted_file">
            <input type="submit" name="submit">
        </form>

        <!-- Show file list here -->
        <ul id="file-list">
        </ul>
    </div>
</body>
<script src="http://code.jquery.com/jquery-3.5.1.min.js"></script>
<script>
    let userServer = document.getElementById('user-server')
    let files = document.getElementById('file-list')
    user_cookie = document.cookie.split(';')[0]
    user = user_cookie.split('=')[1]

    userServer.innerText += user + "'s Storage Server"

    $(document).ready(function(){
        $.ajax({
                type: "GET",
                url: "/storage/files",
                success: function (res) {
                    temp = res.trim().split(',')
                    console.log(temp)
                    if(temp[0] != ''){
                        temp.map((file) => {
                            let li = document.createElement("li");
                            let down_btn = document.createElement("button");
                            let del_btn = document.createElement("button");
                            li.innerText +=file;
                            down_btn.innerText += "Download";
                            del_btn.innerText += "Delete";
                            li.appendChild(down_btn);
                            li.appendChild(del_btn);
                            files.appendChild(li);
                    });}
                },
            });
    })
</script>
</html>
            